[
  {
    "objectID": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html",
    "href": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html",
    "title": "Spatial Autocorrelation",
    "section": "",
    "text": "pacman::p_load(sf, tidyverse, tmap, sfdep, spdep, lubridate, plotly)"
  },
  {
    "objectID": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#installing-and-loading-r-packages",
    "href": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#installing-and-loading-r-packages",
    "title": "Spatial Autocorrelation",
    "section": "",
    "text": "pacman::p_load(sf, tidyverse, tmap, sfdep, spdep, lubridate, plotly)"
  },
  {
    "objectID": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#importing-data",
    "href": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#importing-data",
    "title": "Spatial Autocorrelation",
    "section": "Importing Data",
    "text": "Importing Data\n\nfacilities_sum_by_province &lt;- readr::read_rds(\"rds/facilities_sum_by_province.rds\")"
  },
  {
    "objectID": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#global-spatial-autocorrelation",
    "href": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#global-spatial-autocorrelation",
    "title": "Spatial Autocorrelation",
    "section": "Global Spatial Autocorrelation",
    "text": "Global Spatial Autocorrelation\nGlobal spatial autocorrelation assesses whether similar values tend to be clustered together (positive spatial autocorrelation) or dispersed apart (negative spatial autocorrelation) in space. Two commonly used measures for assessing global spatial autocorrelation are Moran’s I and Geary’s C.\n\nMoran’s I\nFirst, we ensure there is no missing data:\n\nfacilities_sum_by_province &lt;- subset(facilities_sum_by_province, PROVINCE != \"Tbong Khmum\")\nfacilities_sum_by_province %&gt;%\n  mutate_at(vars(-geometry), ~ifelse(is.na(.), \"None\", .))\n\nSimple feature collection with 24 features and 14 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 211598 ymin: 1096586 xmax: 784872.1 ymax: 1625374\nProjected CRS: WGS 84 / UTM zone 48N\nFirst 10 features:\n   ID_0 ISO   NAME_0 ID_1           NAME_1 HASC_1 CCN_1 CCA_1 TYPE_1 ENGTYPE_1\n1    40 KHM Cambodia    1 Bântéay Méanchey  KH.OM     0  None   Khêt  Province\n2    40 KHM Cambodia    2       Batdâmbâng  KH.BA     0  None   Khêt  Province\n3    40 KHM Cambodia    3           Kâmpôt  KH.KP     0  None   Khêt  Province\n4    40 KHM Cambodia    4     Kâmpóng Cham  KH.KM     0  None   Khêt  Province\n5    40 KHM Cambodia    5  Kâmpóng Chhnang  KH.KG     0  None   Khêt  Province\n6    40 KHM Cambodia    6      Kâmpóng Spœ  KH.KS     0  None   Khêt  Province\n7    40 KHM Cambodia    7     Kâmpóng Thum  KH.KT     0  None   Khêt  Province\n8    40 KHM Cambodia    8           Kândal  KH.KN     0  None   Khêt  Province\n9    40 KHM Cambodia    9        Kaôh Kong  KH.KK     0  None   Khêt  Province\n10   40 KHM Cambodia   10              Kep     KH     0  None   Khêt  Province\n   NL_NAME_1                               VARNAME_1         PROVINCE\n1       None                      Banteay Mean Cheay Banteay Meanchey\n2       None    Battambang|Baat Dambang|Bat Dâm Bâng       Batdambang\n3       None                                    None           Kampot\n4       None              Kampong Chaam|Kompong Cham     Kampong Cham\n5       None                          Kompong Chnang  Kampong Chhnang\n6       None Kampong Speu|Kompong Speu|Kompong Spueu     Kampong Spoe\n7       None               Kampong Thom|Kompong Thom     Kampong Thum\n8       None                                 Kandaal           Kandal\n9       None                                Koh Kong        Kaoh Kong\n10      None                                     Keb              Kep\n   FACILITIES_SUM                       geometry\n1              71 MULTIPOLYGON (((288944.1 15...\n2              81 MULTIPOLYGON (((249907.2 14...\n3              52 MULTIPOLYGON (((408632.1 11...\n4             145 MULTIPOLYGON (((578664.2 13...\n5              39 MULTIPOLYGON (((443815.2 13...\n6              53 MULTIPOLYGON (((414125.8 13...\n7              53 MULTIPOLYGON (((559078.1 14...\n8              94 MULTIPOLYGON (((479410.6 13...\n9              17 MULTIPOLYGON (((268234.6 10...\n10              5 MULTIPOLYGON (((422531.3 11...\n\n\nNext, we derive contiguity and assign weights:\n\nwm_q &lt;- poly2nb(facilities_sum_by_province, queen=TRUE)\n\nsummary(wm_q)\n\nNeighbour list object:\nNumber of regions: 24 \nNumber of nonzero links: 90 \nPercentage nonzero weights: 15.625 \nAverage number of links: 3.75 \nLink number distribution:\n\n1 2 3 4 5 6 7 \n4 2 5 4 4 4 1 \n4 least connected regions:\n10 12 16 23 with 1 link\n1 most connected region:\n7 with 7 links\n\n\n\nrswm_q &lt;- nb2listw(wm_q, \n                   style=\"W\", \n                   zero.policy = TRUE)\nrswm_q\n\nCharacteristics of weights list object:\nNeighbour list object:\nNumber of regions: 24 \nNumber of nonzero links: 90 \nPercentage nonzero weights: 15.625 \nAverage number of links: 3.75 \n\nWeights style: W \nWeights constants summary:\n   n  nn S0       S1       S2\nW 24 576 24 15.64349 103.7165\n\n\nThen, we compute Monte Carlo Moran’s I:\n\nset.seed(1234)\n\nmoran_result=moran.mc(facilities_sum_by_province$FACILITIES_SUM, \n                          listw=rswm_q, \n                          nsim=99, \n                          zero.policy = TRUE, \n                          na.action=na.omit)\nmoran_result\n\n\n    Monte-Carlo simulation of Moran I\n\ndata:  facilities_sum_by_province$FACILITIES_SUM \nweights: rswm_q  \nnumber of simulations + 1: 100 \n\nstatistic = 0.18934, observed rank = 97, p-value = 0.03\nalternative hypothesis: greater\n\n\nVisualising Monte Carlo Moran’s I:\n\nhist_color &lt;- \"#69b3a2\"  \n          line_color &lt;- \"red\"      \n          \n          hist(moran_result$res, \n               freq = TRUE, \n               breaks = 20, \n               col = hist_color,             \n               border = \"white\",            \n               xlab = \"Simulated Moran's I\",\n               main = \"Histogram of Simulated Moran's I\")  \n          \n          abline(v = 0, col = line_color, lwd = 2) \n          legend(\"topright\", legend = c(\"Moran's I = 0\"), col = c(line_color), lwd = c(2), bty = \"n\")\n\n\n\n\n\n\nGeary’s C\nWe compute Monte Carlo Geary’s C using the same contiguity derived earlier.\n\ngeary_result=geary.mc(facilities_sum_by_province$FACILITIES_SUM,  \n                         listw=rswm_q, \n                         nsim=99)\ngeary_result\n\n\n    Monte-Carlo simulation of Geary C\n\ndata:  facilities_sum_by_province$FACILITIES_SUM \nweights: rswm_q \nnumber of simulations + 1: 100 \n\nstatistic = 0.80401, observed rank = 16, p-value = 0.16\nalternative hypothesis: greater\n\n\nVisualising Monte Carlo Geary’s C:\n\nhist_color &lt;- \"#69b3a2\"  \n          line_color &lt;- \"red\"      \n          \n          hist(geary_result$res, \n               freq = TRUE, \n               breaks = 20, \n               col = hist_color,             \n               border = \"white\",            \n               xlab = \"Simulated Geary c\",\n               main = \"Histogram of Simulated Geary's C\")  \n          \n          abline(v = 1, col = line_color, lwd = 2) \n          legend(\"topright\", legend = c(\"Geary's C = 1\"), col = c(line_color), lwd = c(2), bty = \"n\")\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFor the purpose of the app, users will have the option to choose between Moran’s I and Geary’s C, the number of Monte Carlo simulations for each measure as well as the number of bins for plotting this histogram."
  },
  {
    "objectID": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#local-spatial-autocorrelation",
    "href": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#local-spatial-autocorrelation",
    "title": "Spatial Autocorrelation",
    "section": "Local Spatial Autocorrelation",
    "text": "Local Spatial Autocorrelation\nUnlike global spatial autocorrelation, which assesses the overall tendency for similar values to cluster together or disperse apart across the entire study area, local spatial autocorrelation examines spatial patterns at a more localized level. Two commonly used measures for assessing local spatial autocorrelation include Local Moran’s I and Getis-Ord Gi* statistics.\n\nLocal Moran’s I\nFirst, we derive contiguity:\n\nwm_q &lt;- facilities_sum_by_province %&gt;%\n          mutate(nb = st_contiguity(geometry),\n                 wt = st_weights(nb,\n                                 style = \"W\"),\n                 .before = 1) \nwm_q\n\nSimple feature collection with 24 features and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 211598 ymin: 1096586 xmax: 784872.1 ymax: 1625374\nProjected CRS: WGS 84 / UTM zone 48N\nFirst 10 features:\n                         nb\n1                 2, 15, 21\n2             1, 12, 17, 21\n3          6, 9, 10, 13, 24\n4           5, 7, 8, 11, 19\n5            4, 6, 7, 8, 17\n6        3, 5, 8, 9, 17, 24\n7  4, 5, 11, 17, 18, 21, 22\n8       4, 5, 6, 16, 19, 24\n9              3, 6, 13, 17\n10                        3\n                                                                            wt\n1                                              0.3333333, 0.3333333, 0.3333333\n2                                                       0.25, 0.25, 0.25, 0.25\n3                                                      0.2, 0.2, 0.2, 0.2, 0.2\n4                                                      0.2, 0.2, 0.2, 0.2, 0.2\n5                                                      0.2, 0.2, 0.2, 0.2, 0.2\n6             0.1666667, 0.1666667, 0.1666667, 0.1666667, 0.1666667, 0.1666667\n7  0.1428571, 0.1428571, 0.1428571, 0.1428571, 0.1428571, 0.1428571, 0.1428571\n8             0.1666667, 0.1666667, 0.1666667, 0.1666667, 0.1666667, 0.1666667\n9                                                       0.25, 0.25, 0.25, 0.25\n10                                                                           1\n   ID_0 ISO   NAME_0 ID_1           NAME_1 HASC_1 CCN_1 CCA_1 TYPE_1 ENGTYPE_1\n1    40 KHM Cambodia    1 Bântéay Méanchey  KH.OM     0  &lt;NA&gt;   Khêt  Province\n2    40 KHM Cambodia    2       Batdâmbâng  KH.BA     0  &lt;NA&gt;   Khêt  Province\n3    40 KHM Cambodia    3           Kâmpôt  KH.KP     0  &lt;NA&gt;   Khêt  Province\n4    40 KHM Cambodia    4     Kâmpóng Cham  KH.KM     0  &lt;NA&gt;   Khêt  Province\n5    40 KHM Cambodia    5  Kâmpóng Chhnang  KH.KG     0  &lt;NA&gt;   Khêt  Province\n6    40 KHM Cambodia    6      Kâmpóng Spœ  KH.KS     0  &lt;NA&gt;   Khêt  Province\n7    40 KHM Cambodia    7     Kâmpóng Thum  KH.KT     0  &lt;NA&gt;   Khêt  Province\n8    40 KHM Cambodia    8           Kândal  KH.KN     0  &lt;NA&gt;   Khêt  Province\n9    40 KHM Cambodia    9        Kaôh Kong  KH.KK     0  &lt;NA&gt;   Khêt  Province\n10   40 KHM Cambodia   10              Kep     KH     0  &lt;NA&gt;   Khêt  Province\n   NL_NAME_1                               VARNAME_1         PROVINCE\n1       &lt;NA&gt;                      Banteay Mean Cheay Banteay Meanchey\n2       &lt;NA&gt;    Battambang|Baat Dambang|Bat Dâm Bâng       Batdambang\n3       &lt;NA&gt;                                    &lt;NA&gt;           Kampot\n4       &lt;NA&gt;              Kampong Chaam|Kompong Cham     Kampong Cham\n5       &lt;NA&gt;                          Kompong Chnang  Kampong Chhnang\n6       &lt;NA&gt; Kampong Speu|Kompong Speu|Kompong Spueu     Kampong Spoe\n7       &lt;NA&gt;               Kampong Thom|Kompong Thom     Kampong Thum\n8       &lt;NA&gt;                                 Kandaal           Kandal\n9       &lt;NA&gt;                                Koh Kong        Kaoh Kong\n10      &lt;NA&gt;                                     Keb              Kep\n   FACILITIES_SUM                       geometry\n1              71 MULTIPOLYGON (((288944.1 15...\n2              81 MULTIPOLYGON (((249907.2 14...\n3              52 MULTIPOLYGON (((408632.1 11...\n4             145 MULTIPOLYGON (((578664.2 13...\n5              39 MULTIPOLYGON (((443815.2 13...\n6              53 MULTIPOLYGON (((414125.8 13...\n7              53 MULTIPOLYGON (((559078.1 14...\n8              94 MULTIPOLYGON (((479410.6 13...\n9              17 MULTIPOLYGON (((268234.6 10...\n10              5 MULTIPOLYGON (((422531.3 11...\n\n\nThen, we compute Local Moran’s I:\n\nlisa &lt;- wm_q %&gt;% \n          mutate(local_moran = local_moran(\n            FACILITIES_SUM, nb, wt, nsim = 99),\n            .before = 1) %&gt;%\n          unnest(local_moran)\nlisa\n\nSimple feature collection with 24 features and 28 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 211598 ymin: 1096586 xmax: 784872.1 ymax: 1625374\nProjected CRS: WGS 84 / UTM zone 48N\n# A tibble: 24 × 29\n         ii      eii  var_ii    z_ii   p_ii p_ii_sim p_folded_sim skewness\n      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;\n 1  0.214   -0.0872  0.166    0.741  0.459      0.48         0.24   0.669 \n 2 -0.00247 -0.0501  0.320    0.0841 0.933      0.82         0.41   0.536 \n 3 -0.0589   0.0139  0.00451 -1.08   0.279      0.28         0.14   0.283 \n 4  1.48    -0.298   1.28     1.58   0.115      0.18         0.09   0.231 \n 5 -0.207   -0.00595 0.0135  -1.73   0.0830     0.12         0.06  -0.0935\n 6  0.0298  -0.00979 0.00389  0.634  0.526      0.48         0.24   0.235 \n 7  0.0373  -0.00544 0.00432  0.650  0.516      0.54         0.27   0.155 \n 8  1.09    -0.0190  0.289    2.06   0.0390     0.08         0.04   0.424 \n 9  0.213   -0.0651  0.206    0.612  0.541      0.64         0.33  -0.183 \n10 -0.181    0.131   1.37    -0.267  0.789      0.76         0.38  -1.34  \n# ℹ 14 more rows\n# ℹ 21 more variables: kurtosis &lt;dbl&gt;, mean &lt;fct&gt;, median &lt;fct&gt;, pysal &lt;fct&gt;,\n#   nb &lt;nb&gt;, wt &lt;list&gt;, ID_0 &lt;dbl&gt;, ISO &lt;chr&gt;, NAME_0 &lt;chr&gt;, ID_1 &lt;dbl&gt;,\n#   NAME_1 &lt;chr&gt;, HASC_1 &lt;chr&gt;, CCN_1 &lt;dbl&gt;, CCA_1 &lt;chr&gt;, TYPE_1 &lt;chr&gt;,\n#   ENGTYPE_1 &lt;chr&gt;, NL_NAME_1 &lt;chr&gt;, VARNAME_1 &lt;chr&gt;, PROVINCE &lt;chr&gt;,\n#   FACILITIES_SUM &lt;int&gt;, geometry &lt;MULTIPOLYGON [m]&gt;\n\n\nVisualising values of Local Moran’s I:\n\ntmap_mode(\"plot\")\ntm_shape(lisa) +\n  tm_fill(\"ii\") + \n  tm_borders(alpha = 0.5) +\n  tm_view(set.zoom.limits = c(6,8)) +\n  tm_layout(main.title = \"Local Moran's I of GDPPC\",\n            main.title.size = 0.8)\n\n\n\n\n\ntmap_mode(\"plot\")\ntm_shape(lisa) +\n  tm_fill(\"p_ii\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\")) + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Local Moran's I\",\n            main.title.size = 0.8)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFor the purpose of the app, users will have the option to pick the Local Moran’s I statistic that they want to plot, as well as the data classification style and the simulations to derive contiguity spatial weight matrix."
  },
  {
    "objectID": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#lisa-map",
    "href": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#lisa-map",
    "title": "Spatial Autocorrelation",
    "section": "LISA Map:",
    "text": "LISA Map:\n\nlisa_sig &lt;- lisa  %&gt;%\n  filter(p_ii &lt; 0.05)\ntmap_mode(\"plot\")\ntm_shape(lisa) +\n  tm_polygons(id=\"PROVINCE\") +\n  tm_borders(alpha = 0.5) +\n  tm_shape(lisa_sig) +\n  tm_fill(\"mean\", id=\"PROVINCE\") + \n  tm_borders(alpha = 0.4)\n\n\n\n\n\nGetis-Ord Gi* Statistics\nGi* statistics are distance-based spatial statistics. Hence, distance methods are required instead of contiguity methods to derive the spatial weight matrix.\n\nwm_idw &lt;- facilities_sum_by_province %&gt;%\n          mutate(nb = st_contiguity(geometry),\n                 wts = st_inverse_distance(nb, geometry,\n                                           scale = 1,\n                                           alpha = 1),\n                 .before = 1)\nwm_idw\n\nSimple feature collection with 24 features and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 211598 ymin: 1096586 xmax: 784872.1 ymax: 1625374\nProjected CRS: WGS 84 / UTM zone 48N\nFirst 10 features:\n                         nb\n1                 2, 15, 21\n2             1, 12, 17, 21\n3          6, 9, 10, 13, 24\n4           5, 7, 8, 11, 19\n5            4, 6, 7, 8, 17\n6        3, 5, 8, 9, 17, 24\n7  4, 5, 11, 17, 18, 21, 22\n8       4, 5, 6, 16, 19, 24\n9              3, 6, 13, 17\n10                        3\n                                                                                                wts\n1                                                          1.017073e-05, 1.539264e-05, 9.185003e-06\n2                                            1.017073e-05, 1.502025e-05, 1.342133e-05, 9.603265e-06\n3                              1.146869e-05, 9.084303e-06, 3.321504e-05, 1.555795e-05, 1.889056e-05\n4                              1.362965e-05, 1.217940e-05, 1.214877e-05, 8.982280e-06, 1.145273e-05\n5                              1.362965e-05, 1.369902e-05, 1.189533e-05, 9.844541e-06, 1.076453e-05\n6                1.146869e-05, 1.369902e-05, 1.187042e-05, 1.257002e-05, 8.828817e-06, 1.102309e-05\n7  1.217940e-05, 1.189533e-05, 8.316100e-06, 7.149182e-06, 9.759527e-06, 8.053985e-06, 5.958687e-06\n8                1.214877e-05, 9.844541e-06, 1.187042e-05, 4.236501e-05, 2.104978e-05, 1.758677e-05\n9                                            9.084303e-06, 1.257002e-05, 1.232858e-05, 8.741503e-06\n10                                                                                     3.321504e-05\n   ID_0 ISO   NAME_0 ID_1           NAME_1 HASC_1 CCN_1 CCA_1 TYPE_1 ENGTYPE_1\n1    40 KHM Cambodia    1 Bântéay Méanchey  KH.OM     0  &lt;NA&gt;   Khêt  Province\n2    40 KHM Cambodia    2       Batdâmbâng  KH.BA     0  &lt;NA&gt;   Khêt  Province\n3    40 KHM Cambodia    3           Kâmpôt  KH.KP     0  &lt;NA&gt;   Khêt  Province\n4    40 KHM Cambodia    4     Kâmpóng Cham  KH.KM     0  &lt;NA&gt;   Khêt  Province\n5    40 KHM Cambodia    5  Kâmpóng Chhnang  KH.KG     0  &lt;NA&gt;   Khêt  Province\n6    40 KHM Cambodia    6      Kâmpóng Spœ  KH.KS     0  &lt;NA&gt;   Khêt  Province\n7    40 KHM Cambodia    7     Kâmpóng Thum  KH.KT     0  &lt;NA&gt;   Khêt  Province\n8    40 KHM Cambodia    8           Kândal  KH.KN     0  &lt;NA&gt;   Khêt  Province\n9    40 KHM Cambodia    9        Kaôh Kong  KH.KK     0  &lt;NA&gt;   Khêt  Province\n10   40 KHM Cambodia   10              Kep     KH     0  &lt;NA&gt;   Khêt  Province\n   NL_NAME_1                               VARNAME_1         PROVINCE\n1       &lt;NA&gt;                      Banteay Mean Cheay Banteay Meanchey\n2       &lt;NA&gt;    Battambang|Baat Dambang|Bat Dâm Bâng       Batdambang\n3       &lt;NA&gt;                                    &lt;NA&gt;           Kampot\n4       &lt;NA&gt;              Kampong Chaam|Kompong Cham     Kampong Cham\n5       &lt;NA&gt;                          Kompong Chnang  Kampong Chhnang\n6       &lt;NA&gt; Kampong Speu|Kompong Speu|Kompong Spueu     Kampong Spoe\n7       &lt;NA&gt;               Kampong Thom|Kompong Thom     Kampong Thum\n8       &lt;NA&gt;                                 Kandaal           Kandal\n9       &lt;NA&gt;                                Koh Kong        Kaoh Kong\n10      &lt;NA&gt;                                     Keb              Kep\n   FACILITIES_SUM                       geometry\n1              71 MULTIPOLYGON (((288944.1 15...\n2              81 MULTIPOLYGON (((249907.2 14...\n3              52 MULTIPOLYGON (((408632.1 11...\n4             145 MULTIPOLYGON (((578664.2 13...\n5              39 MULTIPOLYGON (((443815.2 13...\n6              53 MULTIPOLYGON (((414125.8 13...\n7              53 MULTIPOLYGON (((559078.1 14...\n8              94 MULTIPOLYGON (((479410.6 13...\n9              17 MULTIPOLYGON (((268234.6 10...\n10              5 MULTIPOLYGON (((422531.3 11...\n\n\nThen, we compute Local Gi*:\n\nHCSA &lt;- wm_idw %&gt;%\n  mutate(local_Gi = local_gstar_perm(\n    FACILITIES_SUM, nb, wt, nsim = 99),\n    .before = 1) %&gt;%\n  unnest(local_Gi)\n\nHCSA\n\nSimple feature collection with 24 features and 24 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 211598 ymin: 1096586 xmax: 784872.1 ymax: 1625374\nProjected CRS: WGS 84 / UTM zone 48N\n# A tibble: 24 × 25\n   gi_star   e_gi   var_gi p_value  p_sim p_folded_sim skewness kurtosis nb   \n     &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;nb&gt; \n 1   0.867 0.0451 0.000137   0.739 0.460          0.46     0.23    0.595 &lt;int&gt;\n 2   0.489 0.0431 0.000132   0.396 0.692          0.64     0.32    1.40  &lt;int&gt;\n 3  -0.867 0.0424 0.000154  -0.811 0.417          0.4      0.2     0.934 &lt;int&gt;\n 4   2.52  0.0518 0.000101   1.70  0.0893         0.12     0.06    0.523 &lt;int&gt;\n 5   1.89  0.0423 0.000110   1.89  0.0590         0.1      0.05    0.252 &lt;int&gt;\n 6   0.526 0.0431 0.000117   0.336 0.737          0.7      0.35    0.500 &lt;int&gt;\n 7   0.706 0.0428 0.000115   0.474 0.636          0.66     0.33    0.559 &lt;int&gt;\n 8   2.68  0.0466 0.000103   2.08  0.0378         0.08     0.04    0.595 &lt;int&gt;\n 9  -0.908 0.0362 0.000126  -0.494 0.621          0.72     0.35    0.632 &lt;int&gt;\n10  -0.795 0.0235 0.000237   0.114 0.909          0.78     0.42    1.14  &lt;int&gt;\n# ℹ 14 more rows\n# ℹ 16 more variables: wts &lt;list&gt;, ID_0 &lt;dbl&gt;, ISO &lt;chr&gt;, NAME_0 &lt;chr&gt;,\n#   ID_1 &lt;dbl&gt;, NAME_1 &lt;chr&gt;, HASC_1 &lt;chr&gt;, CCN_1 &lt;dbl&gt;, CCA_1 &lt;chr&gt;,\n#   TYPE_1 &lt;chr&gt;, ENGTYPE_1 &lt;chr&gt;, NL_NAME_1 &lt;chr&gt;, VARNAME_1 &lt;chr&gt;,\n#   PROVINCE &lt;chr&gt;, FACILITIES_SUM &lt;int&gt;, geometry &lt;MULTIPOLYGON [m]&gt;\n\n\nVisualising Local Gi*:\n\ntmap_mode(\"plot\")\ntm_shape(HCSA) +\n  tm_fill(\"gi_star\") + \n  tm_borders(alpha = 0.5) +\n  tm_view(set.zoom.limits = c(6,8))\n\n\n\n  tm_layout(main.title = \"Gi* of Healthcare Facilities\",\n            main.title.size = 0.8)\n\n$tm_layout\n$tm_layout$main.title\n[1] \"Gi* of Healthcare Facilities\"\n\n$tm_layout$main.title.size\n[1] 0.8\n\n$tm_layout$style\n[1] NA\n\n\nattr(,\"class\")\n[1] \"tm\"\n\n\n\ntmap_mode(\"plot\")\ntm_shape(HCSA) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\")) + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFor the purpose of the app, users will have the option to pick the Gi* statistic that they want to plot, as well as the data classification style and the simulations to derive the distance spatial weight matrix."
  },
  {
    "objectID": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#hcsa-map",
    "href": "Prototype/Spatial Autocorrelation/SpatialAutocorrelation.html#hcsa-map",
    "title": "Spatial Autocorrelation",
    "section": "HCSA Map",
    "text": "HCSA Map\n\nHCSA_sig &lt;- HCSA  %&gt;%\n  filter(p_sim &lt; 0.05)\ntmap_mode(\"plot\")\ntm_shape(HCSA) +\n  tm_polygons() +\n  tm_borders(alpha = 0.5) +\ntm_shape(HCSA_sig) +\n  tm_fill(\"gi_star\") + \n  tm_borders(alpha = 0.4)"
  },
  {
    "objectID": "about.html#spatial-point-pattern-analysis-of-healthcare-facilities-in-cambodia",
    "href": "about.html#spatial-point-pattern-analysis-of-healthcare-facilities-in-cambodia",
    "title": "HealthGeo Cambodia",
    "section": "Spatial Point Pattern Analysis of Healthcare Facilities in Cambodia",
    "text": "Spatial Point Pattern Analysis of Healthcare Facilities in Cambodia\nGroup Members: Akshaya Natarajan, Viddyasri Subramaniam\n\nIn this project, we aim to gain a deeper understanding of healthcare facility distribution in Cambodia. Given Cambodia’s unique geographical and demographic characteristics, examining the placement of healthcare facilities in relation to population distribution can offer valuable insights into the accessibility of healthcare across various regions, including cities, towns, and rural areas. By studying the distribution of healthcare facilities, we seek to identify areas with limited access to healthcare services and understand the factors contributing to such disparities.\nWe have chosen Cambodia due to its proximity to Singapore and its uniform Coordinate Reference System (CRS), which allows for accurate projection of our data. Cambodia, being a small country, provides a manageable dataset for analysis. Furthermore, analyzing healthcare facility distribution in Cambodia can provide insights into broader human development indicators, such as education levels, nutrition, and mortality rates, within different Cambodian localities(provinces, districts, villages).\nBy understanding the spatial distribution of healthcare resources and its correlation with socio-economic factors, we aim to inform policy-making and resource allocation decisions to improve healthcare accessibility and outcomes across Cambodia.\nWe aim to execute our analysis via a three pronged approach:\n\nExploratory Data Analysis of the aspatial and geospatial data\nNetwork Constrained Kernel Density Estimation of healthcare facilities\nSpatial Autocorrelation of healthcare facilities"
  },
  {
    "objectID": "index.html#spatial-point-pattern-analysis-of-healthcare-facilities-in-cambodia",
    "href": "index.html#spatial-point-pattern-analysis-of-healthcare-facilities-in-cambodia",
    "title": "HealthGeo Cambodia",
    "section": "Spatial Point Pattern Analysis of Healthcare Facilities in Cambodia",
    "text": "Spatial Point Pattern Analysis of Healthcare Facilities in Cambodia\nGroup Members: Akshaya Natarajan, Viddyasri Subramaniam\nIn this project, we aim to gain a deeper understanding of healthcare facility distribution in Cambodia. Given Cambodia’s unique geographical and demographic characteristics, examining the placement of healthcare facilities in relation to population distribution can offer valuable insights into the accessibility of healthcare across various regions, including districts, communes, and village areas.\nThis project aims to democratize spatial analysis, making it accessible and insightful for users regardless of their experience level. This in turn allows all users to explore the spatial distribution of healthcare facilities and its correlation with other socio-economic factors.\nOur application for spatial point pattern analysis comprises a three pronged approach:\n\nExploratory Data Analysis of Geospatial and Population data\nNetwork Constrained Spatial Point Pattern Analysis\nSpatial Autocorrelation of Healthcare Facilities"
  },
  {
    "objectID": "Project/Proposal.html",
    "href": "Project/Proposal.html",
    "title": "Project Overview",
    "section": "",
    "text": "Access to healthcare facilities is a cornerstone of public health, playing a critical role in disease prevention, timely intervention, and the overall enhancement of health outcomes. The accessibility of healthcare services is a multifaceted concept encompassing geographical proximity, transportation infrastructure, and the availability of diverse medical facilities. In the context of Cambodia, a nation marked by diversity and a vast population, understanding the dynamics of healthcare accessibility becomes paramount for effective public health management.\nIn Cambodia, the healthcare landscape exhibits significant variations across regions, where urban areas often boast more robust healthcare infrastructure compared to remote and rural regions. This disparity in accessibility to healthcare facilities presents a considerable challenge, potentially impeding prompt diagnosis and treatment of illnesses. Such spatial inequalities contribute to divergent health outcomes, particularly impacting marginalized populations who encounter obstacles in accessing medical services.\n\n\n\nRecognizing the pivotal role of accessible healthcare, conducting a spatial point pattern analysis becomes an invaluable tool for understanding the distribution of healthcare infrastructure.\nTherefore, we aim to provide a user-friendly app for spatial point pattern analysis, designed to simplify complex analytical processes for users of all backgrounds. Our motivation is rooted in the belief that everyone should have easy access to powerful spatial analysis tools, without the need for extensive coding knowledge or technical expertise.\nWith a straightforward interface and compatibility across various operating systems, our app aims to democratize spatial analysis, making it accessible and insightful for users regardless of their experience level.\n\n\n\n\nEmploy geospatial mapping techniques to visually represent the distribution of healthcare facilities and other socio-economic factors across regions of different sizes in Cambodia - provinces, districts, communes, and villages.\nApply spatial analysis methods to assess spatial distribution of points while considering network connectivity and evaluate spatial dependence or similarity between neighboring observations.\n\n\n\n\nThis project will utilize a number of data sets, which are:\n\nHealthcare facility locations, namely\n\nLocation of health centers\nLocation of health posts\nLocation of national hospitals\nLocation of referral hospitals\n\nPopulation information\nRoad network data\nCambodia boundary layer\n\nLevel 1 - Province\nLevel 2 - District\nLevel 3 - Commune\nLevel 4 - Village\n\n\n\n\n\nExploratory Data Analysis and Geo-visualization:\nThis feature aims to provide users with an intuitive understanding of the current distribution of healthcare facilities and other indicators through interactive point maps and choropleth maps.\nNetwork Constrained Spatial Point Pattern Analysis:\nThis feature aims to offer insights into healthcare facility distribution based on the road network, allowing users to analyze spatial point patterns while considering the constraints imposed by a network topology. In addition, users can conduct K and G function analysis which provides insights into the spatial dependence, highlighting areas of clustering, dispersion, or randomness.\nSpatial Autocorrelation:\nThis feature aims to unveil spatial patterns of healthcare accessibility disparities by identifying regions with significant positive or negative autocorrelation. Users gain insights into clusters of high accessibility (positive autocorrelation) or low accessibility (negative autocorrelation).\n\n\n\n\n\nAim Of Study:\nTo assess the availability of Primary Health Centers in Chamarajanagara District using Kernel Density Estimation (KDE) for assessing population coverage of health services.\nMethodology:\nIt calculates accessibility ratios such as Population to Primary Health Centre (PHC) and Population to Health Workforce using Kernel Density Estimation (KDE). \nLearning Points:\n1.  Use of KDE: It emphasizes the use of Kernel Density Estimation (KDE) to spread discrete facility location data over a continuous space, which could improve the representation of healthcare service availability and accessibility. KDE can consider the relationship between the population and healthcare facilities more effectively, providing a continuous surface representation that is not limited by administrative boundaries.\n2. Healthcare Accessibility Assessment: It illustrates how KDE can be used to calculate population-to-facility or staffing ratios, which can inform potential healthcare accessibility and could be beneficial for healthcare service planning.\nLink to source\n\n\n\nAim Of Study:\n1. To develop a method to ascertain the spatial clustering of the 20 leading healthcare events, using medical data collected by the Taiwan National Health Insurance (NHI) agency.\n2. To investigate the potential spatial risk factors contributing to these healthcare events and to redefine epidemiologic data with spatial references.\nMethodology:\nIt utilizes spatial autocorrelation methodologies, including Global Moran’s I and Local Getis-Ord statistics, to describe and map spatial clusters, and areas in which these are situated, for the 20 leading causes of death in Taiwan. In addition, it uses the fit to a logistic regression model to test the characteristics of similarity and dissimilarity by gender.\nLearning Points:\n1. Spatial Autocorrelation: The paper shows how to assess spatial autocorrelation using Global Moran’s I statistic;  we may use this to determine which areas in our study have a high or low density of healthcare facilities.\n2. Local Spatial Clusters: By using the Local G-statistic (Gi*) to find local spatial clusters of healthcare events, we can determine the precise locations of concentrated healthcare facilities\n3. Incorporation of Demographic Data: The study integrates demographic data for more accurate health event mapping, which is essential for considering population distribution in your accessibility analysis.\nLink to source\n\n\n\n\n\n\n\n\nHomepage:\n\nFeature Tab:\n\n\n\n\n\n\n\n\n\n\n\nWeek 9\nIn week one, we focus on data exploration, seeking additional aspatial data to enhance our research. This involves crucial data cleaning tasks, including CRS conversion and eliminating invalid or empty entries. Explanatory data analysis findings will be presented on Shiny for accessibility and interpretation.\n\n\nWeek 10\nContinuing with Exploratory Data Analysis (EDA), we’ll showcase the feature on Shiny.\nAdditionally, we’ll conduct Network Kernel Density Estimation (NKDE) to analyze the distribution of healthcare facilities along roads, and the results will also be integrated into the Shiny platform.\n\n\nWeek 11\nContinuing with Network Kernel Density Estimation (NKDE) on Shiny, we’ll also explore clustering using autocorrelation. Transitioning to global spatial autocorrelation, we aim to identify patterns of potential clustering or dispersion, contributing valuable insights to our research.\n\n\nWeek 12\nWe’ll delve into local spatial autocorrelation to pinpoint specific locations exhibiting clustering or dispersion. These insights will be seamlessly integrated into Shiny, empowering users to identify and analyze areas with distinct patterns of clustering within our research.\n\n\nWeek 13\nThis week, we will focus on local spatial autocorrelation, emphasizing the significance of clustering as a key feature in our analysis.\n\n\nWeek 14\nConcluding our application, we will conduct hotspot and coldspot analysis to delve even deeper into specific locations. Additionally, we will diligently work on completing essential deliverables, including the poster, to ensure a comprehensive submission."
  },
  {
    "objectID": "Project/Proposal.html#spatial-point-pattern-analysis-of-healthcare-facilities-in-cambodia",
    "href": "Project/Proposal.html#spatial-point-pattern-analysis-of-healthcare-facilities-in-cambodia",
    "title": "Project Overview",
    "section": "",
    "text": "Access to healthcare facilities is a cornerstone of public health, playing a critical role in disease prevention, timely intervention, and the overall enhancement of health outcomes. The accessibility of healthcare services is a multifaceted concept encompassing geographical proximity, transportation infrastructure, and the availability of diverse medical facilities. In the context of Cambodia, a nation marked by diversity and a vast population, understanding the dynamics of healthcare accessibility becomes paramount for effective public health management.\nIn Cambodia, the healthcare landscape exhibits significant variations across regions, where urban areas often boast more robust healthcare infrastructure compared to remote and rural regions. This disparity in accessibility to healthcare facilities presents a considerable challenge, potentially impeding prompt diagnosis and treatment of illnesses. Such spatial inequalities contribute to divergent health outcomes, particularly impacting marginalized populations who encounter obstacles in accessing medical services.\n\n\n\nRecognizing the pivotal role of accessible healthcare, conducting a spatial point pattern analysis becomes an invaluable tool for understanding the distribution of healthcare infrastructure.\nTherefore, we aim to provide a user-friendly app for spatial point pattern analysis, designed to simplify complex analytical processes for users of all backgrounds. Our motivation is rooted in the belief that everyone should have easy access to powerful spatial analysis tools, without the need for extensive coding knowledge or technical expertise.\nWith a straightforward interface and compatibility across various operating systems, our app aims to democratize spatial analysis, making it accessible and insightful for users regardless of their experience level.\n\n\n\n\nEmploy geospatial mapping techniques to visually represent the distribution of healthcare facilities and other socio-economic factors across regions of different sizes in Cambodia - provinces, districts, communes, and villages.\nApply spatial analysis methods to assess spatial distribution of points while considering network connectivity and evaluate spatial dependence or similarity between neighboring observations.\n\n\n\n\nThis project will utilize a number of data sets, which are:\n\nHealthcare facility locations, namely\n\nLocation of health centers\nLocation of health posts\nLocation of national hospitals\nLocation of referral hospitals\n\nPopulation information\nRoad network data\nCambodia boundary layer\n\nLevel 1 - Province\nLevel 2 - District\nLevel 3 - Commune\nLevel 4 - Village\n\n\n\n\n\nExploratory Data Analysis and Geo-visualization:\nThis feature aims to provide users with an intuitive understanding of the current distribution of healthcare facilities and other indicators through interactive point maps and choropleth maps.\nNetwork Constrained Spatial Point Pattern Analysis:\nThis feature aims to offer insights into healthcare facility distribution based on the road network, allowing users to analyze spatial point patterns while considering the constraints imposed by a network topology. In addition, users can conduct K and G function analysis which provides insights into the spatial dependence, highlighting areas of clustering, dispersion, or randomness.\nSpatial Autocorrelation:\nThis feature aims to unveil spatial patterns of healthcare accessibility disparities by identifying regions with significant positive or negative autocorrelation. Users gain insights into clusters of high accessibility (positive autocorrelation) or low accessibility (negative autocorrelation).\n\n\n\n\n\nAim Of Study:\nTo assess the availability of Primary Health Centers in Chamarajanagara District using Kernel Density Estimation (KDE) for assessing population coverage of health services.\nMethodology:\nIt calculates accessibility ratios such as Population to Primary Health Centre (PHC) and Population to Health Workforce using Kernel Density Estimation (KDE). \nLearning Points:\n1.  Use of KDE: It emphasizes the use of Kernel Density Estimation (KDE) to spread discrete facility location data over a continuous space, which could improve the representation of healthcare service availability and accessibility. KDE can consider the relationship between the population and healthcare facilities more effectively, providing a continuous surface representation that is not limited by administrative boundaries.\n2. Healthcare Accessibility Assessment: It illustrates how KDE can be used to calculate population-to-facility or staffing ratios, which can inform potential healthcare accessibility and could be beneficial for healthcare service planning.\nLink to source\n\n\n\nAim Of Study:\n1. To develop a method to ascertain the spatial clustering of the 20 leading healthcare events, using medical data collected by the Taiwan National Health Insurance (NHI) agency.\n2. To investigate the potential spatial risk factors contributing to these healthcare events and to redefine epidemiologic data with spatial references.\nMethodology:\nIt utilizes spatial autocorrelation methodologies, including Global Moran’s I and Local Getis-Ord statistics, to describe and map spatial clusters, and areas in which these are situated, for the 20 leading causes of death in Taiwan. In addition, it uses the fit to a logistic regression model to test the characteristics of similarity and dissimilarity by gender.\nLearning Points:\n1. Spatial Autocorrelation: The paper shows how to assess spatial autocorrelation using Global Moran’s I statistic;  we may use this to determine which areas in our study have a high or low density of healthcare facilities.\n2. Local Spatial Clusters: By using the Local G-statistic (Gi*) to find local spatial clusters of healthcare events, we can determine the precise locations of concentrated healthcare facilities\n3. Incorporation of Demographic Data: The study integrates demographic data for more accurate health event mapping, which is essential for considering population distribution in your accessibility analysis.\nLink to source\n\n\n\n\n\n\n\n\nHomepage:\n\nFeature Tab:\n\n\n\n\n\n\n\n\n\n\n\nWeek 9\nIn week one, we focus on data exploration, seeking additional aspatial data to enhance our research. This involves crucial data cleaning tasks, including CRS conversion and eliminating invalid or empty entries. Explanatory data analysis findings will be presented on Shiny for accessibility and interpretation.\n\n\nWeek 10\nContinuing with Exploratory Data Analysis (EDA), we’ll showcase the feature on Shiny.\nAdditionally, we’ll conduct Network Kernel Density Estimation (NKDE) to analyze the distribution of healthcare facilities along roads, and the results will also be integrated into the Shiny platform.\n\n\nWeek 11\nContinuing with Network Kernel Density Estimation (NKDE) on Shiny, we’ll also explore clustering using autocorrelation. Transitioning to global spatial autocorrelation, we aim to identify patterns of potential clustering or dispersion, contributing valuable insights to our research.\n\n\nWeek 12\nWe’ll delve into local spatial autocorrelation to pinpoint specific locations exhibiting clustering or dispersion. These insights will be seamlessly integrated into Shiny, empowering users to identify and analyze areas with distinct patterns of clustering within our research.\n\n\nWeek 13\nThis week, we will focus on local spatial autocorrelation, emphasizing the significance of clustering as a key feature in our analysis.\n\n\nWeek 14\nConcluding our application, we will conduct hotspot and coldspot analysis to delve even deeper into specific locations. Additionally, we will diligently work on completing essential deliverables, including the poster, to ensure a comprehensive submission."
  },
  {
    "objectID": "Prototype/Take-home_Ex03/Take-home_Ex03.html",
    "href": "Prototype/Take-home_Ex03/Take-home_Ex03.html",
    "title": "Network Spatial Point Pattern Analysis",
    "section": "",
    "text": "pacman::p_load(sf, tidyverse, tmap, raster, spatstat, maptools, spNetwork, classInt, viridis, arrow, lubridate, dplyr, sfdep)"
  },
  {
    "objectID": "Prototype/Take-home_Ex03/Take-home_Ex03.html#installing-and-loading-r-packages",
    "href": "Prototype/Take-home_Ex03/Take-home_Ex03.html#installing-and-loading-r-packages",
    "title": "Network Spatial Point Pattern Analysis",
    "section": "",
    "text": "pacman::p_load(sf, tidyverse, tmap, raster, spatstat, maptools, spNetwork, classInt, viridis, arrow, lubridate, dplyr, sfdep)"
  },
  {
    "objectID": "Prototype/Take-home_Ex03/Take-home_Ex03.html#importing-geospatial-data",
    "href": "Prototype/Take-home_Ex03/Take-home_Ex03.html#importing-geospatial-data",
    "title": "Network Spatial Point Pattern Analysis",
    "section": "Importing Geospatial Data",
    "text": "Importing Geospatial Data\nBoundary Layer (Province-Level):\n\nprovince_sf &lt;- st_read(dsn = \"data/cambodia/boundary/level1\", \n                layer = \"KHM_adm1\")\n\nReading layer `KHM_adm1' from data source \n  `C:\\viddyasri\\IS415-HealthGeo-India\\Prototype\\Take-home_Ex03\\data\\cambodia\\boundary\\level1' \n  using driver `ESRI Shapefile'\nSimple feature collection with 25 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 102.3355 ymin: 9.91361 xmax: 107.63 ymax: 14.68817\nGeodetic CRS:  WGS 84\n\n\n\nst_geometry(province_sf)\n\nGeometry set for 25 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 102.3355 ymin: 9.91361 xmax: 107.63 ymax: 14.68817\nGeodetic CRS:  WGS 84\nFirst 5 geometries:\n\n\n\ntmap_mode(\"plot\")\ntm_shape(province_sf) +\n  tm_polygons()\n\n\n\n\nRoad Layer:\n\ncam_road_sf &lt;- st_read(\"data/cambodia/roads/osm_road_2022_1641440547.gpkg\")\n\nReading layer `osm_road_2022_1641440547' from data source \n  `C:\\viddyasri\\IS415-HealthGeo-India\\Prototype\\Take-home_Ex03\\data\\cambodia\\roads\\osm_road_2022_1641440547.gpkg' \n  using driver `GPKG'\nSimple feature collection with 169682 features and 15 fields\nGeometry type: MULTILINESTRING\nDimension:     XY\nBounding box:  xmin: 102.3415 ymin: 10.42264 xmax: 107.6128 ymax: 14.69023\nGeodetic CRS:  WGS 84\n\n\n\nunique(cam_road_sf$fclass)\n\n [1] \"primary\"        \"secondary\"      \"trunk_link\"     \"trunk\"         \n [5] \"secondary_link\" \"primary_link\"   \"unclassified\"   \"residential\"   \n [9] \"tertiary\"       \"service\"        \"path\"           \"track\"         \n[13] \"steps\"          \"footway\"        \"pedestrian\"     \"track_grade3\"  \n[17] \"living_street\"  \"track_grade4\"   \"tertiary_link\"  \"track_grade1\"  \n[21] \"cycleway\"       \"track_grade5\"   \"motorway\"       \"motorway_link\" \n[25] \"track_grade2\"   \"bridleway\"     \n\n\n\nst_geometry(cam_road_sf)\n\nGeometry set for 169682 features \nGeometry type: MULTILINESTRING\nDimension:     XY\nBounding box:  xmin: 102.3415 ymin: 10.42264 xmax: 107.6128 ymax: 14.69023\nGeodetic CRS:  WGS 84\nFirst 5 geometries:\n\n\n\ntmap_mode(\"plot\")\ntm_shape(cam_road_sf) +\n  tm_lines()\n\n\n\n\nHealthcare Facilities\nHealth Centers:\n\npoints_healthcenter &lt;- st_read(dsn = \"data/cambodia/healthcenter\", \n                layer = \"healthcenter\")\n\nReading layer `healthcenter' from data source \n  `C:\\viddyasri\\IS415-HealthGeo-India\\Prototype\\Take-home_Ex03\\data\\cambodia\\healthcenter' \n  using driver `ESRI Shapefile'\nSimple feature collection with 956 features and 13 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 213103.9 ymin: 1155396 xmax: 764437 ymax: 1594142\nProjected CRS: WGS 84 / UTM zone 48N\n\n\n\nhead(points_healthcenter)\n\nSimple feature collection with 6 features and 13 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 276571.9 ymin: 1422232 xmax: 343642 ymax: 1553869\nProjected CRS: WGS 84 / UTM zone 48N\n  PCODE            PNAME DCODE         DNAME  CCODE         CNAME    VCODE\n1     2    Sihanoukville   204         Bavel  20404 Khnach Romeas  2040206\n2     2       Battambang   203   Bat Dambang  20301   Tuol Ta aek  2030102\n3     2       Battambang   213    Koa Krolor  21301      Thibadey  2130104\n4    22  Oddar Mean chey  2203     Chong Kal 220302     Chong kal 22030201\n5     1 Banteay Meanchey   102 Mongkol Borei  10201 Banteay Neang  1020103\n6     1 Banteay Meanchey   102 Mongkol Borei  10203      Chamnaom  1020305\n           VNAME ODCODE        ODNAME FACILITCOD    FACILITNAM\n1  Khnach Romeas   0201    Thmar Koul     020117 Khnach Romeas\n2    O Takoam II   0204   Bat Dambang     020406   Tuol Ta aek\n3   Chhae Balang   0202   Mong Russei     020207      Thibadey\n4      Chong Kal   2201      Samraong     220113       Pong ro\n5  Banteay Neang   0101 Mongkol Borei     010115 Banteay Neang\n6 Chamnaom Kaeut   0101 Mongkol Borei     010112      Chamnaom\n                        COVERNAME                 geometry\n1                            &lt;NA&gt; POINT (277999.9 1467055)\n2                            &lt;NA&gt; POINT (303951.9 1447582)\n3                            &lt;NA&gt; POINT (312278.9 1422232)\n4                            &lt;NA&gt;   POINT (343642 1553869)\n5 Banteay Neang, Commune, 19 Vill POINT (285295.9 1494744)\n6      Chamnaom, Commune, 17 Vill POINT (276571.9 1487280)\n\n\nHealth Posts:\n\npoints_healthpost &lt;- st_read(dsn = \"data/cambodia/healthpost\", \n                layer = \"healthpost\")\n\nReading layer `healthpost' from data source \n  `C:\\viddyasri\\IS415-HealthGeo-India\\Prototype\\Take-home_Ex03\\data\\cambodia\\healthpost' \n  using driver `ESRI Shapefile'\nSimple feature collection with 89 features and 12 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 247772 ymin: 1190286 xmax: 762122.8 ymax: 1591629\nProjected CRS: WGS 84 / UTM zone 48N\n\n\n\nhead(points_healthpost)\n\nSimple feature collection with 6 features and 12 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 589482.9 ymin: 1326873 xmax: 705301 ymax: 1368201\nProjected CRS: WGS 84 / UTM zone 48N\n  PCODE       PNAME DCODE         DNAME  CCODE       CNAME    VCODE       VNAME\n1    10      Kratie  1003 Preaek Prasab 100301     Chambak 10030106 Stueng Thum\n2    10      Kratie  1005         Snuol 100501      Khsuem 10050107 Srae Roneam\n3    10      Kratie  1005         Snuol 100504   Srae Char 10050404  Mean  Chey\n4    10      Kratie  1005         Snuol 100505 Svay Chreah 10050508      Rumpuk\n5    11 Mondul Kiri  1101    Kaev Seima 110103  Srae Chhuk 11010302    Chak Cha\n6    11 Mondul Kiri  1101    Kaev Seima 110104  Srae Khtum 11010401       Ou Am\n  ODCODE      ODNAME FACILITCOD  FACILITNAM                 geometry\n1   1001     Chhlong   10010201 Stueng Thum POINT (589482.9 1366181)\n2   1002      Kratie   10021501 Srae Roneam   POINT (654848 1357465)\n3   1002      Kratie   10021401   Doun Meas   POINT (644705 1326873)\n4   1002      Kratie   10021301      Rumpuk   POINT (640357 1352191)\n5   1101 Sen Monorom     110108 Srae Chhouk   POINT (687516 1368201)\n6   1101 Sen Monorom     110108       Ou Am   POINT (705301 1339600)\n\n\nReferral Hospitals:\n\npoints_referralhospital &lt;- st_read(dsn = \"data/cambodia/referralhospital\", \n                layer = \"hltfacp_referral\")\n\nReading layer `hltfacp_referral' from data source \n  `C:\\viddyasri\\IS415-HealthGeo-India\\Prototype\\Take-home_Ex03\\data\\cambodia\\referralhospital' \n  using driver `ESRI Shapefile'\nSimple feature collection with 76 features and 12 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 216012.9 ymin: 1158852 xmax: 737796 ymax: 1573927\nProjected CRS: WGS 84 / UTM zone 48N\n\n\n\nhead(points_referralhospital)\n\nSimple feature collection with 6 features and 12 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 286126.9 ymin: 1308056 xmax: 628526 ymax: 1542390\nProjected CRS: WGS 84 / UTM zone 48N\n  PCODE            PNAME DCODE            DNAME CCODE         CNAME   VCODE\n1     1 Banteay Meanchey   102    Mongkol Borei 10209 Ruessei Kraok 1020914\n2     1 Banteay Meanchey   104 Preah Netr Preah 10402    Chob Veari 1040201\n3     1 Banteay Meanchey   107        Thma Puok 10704     Thma Puok 1070404\n4     2       Battambang   202        Thma Koul 20201       Ta Pung 2020102\n5     3     Kampong Cham   309    Krouch Chhmar 30905 Krouch Chhmar 3090503\n6     3     Kampong Cham   310            Memot 31008         Memot 3100810\n              VNAME ODCODE                      ODNAME FACILITCOD\n1         Kaoh Kaev   0101               Mongkol Borei     010001\n2              Chob   0103             Preah Net Preah     010301\n3             Kasen   0104                  Thmar Puok     010401\n4         Paoy Yong   0201                  Thmar Koul     020101\n5 Krouch Chhmar Leu   0304 Kroch Chhmar - Stueng Trang     030401\n6       Tboung Voat   0305                       Memut     030501\n           FACILITNAM                 geometry\n1 Provincial Hospital POINT (286126.9 1498169)\n2     Preah Net Preah POINT (302911.9 1507014)\n3          Thmar Puok   POINT (289389 1542390)\n4          Thmar Koul POINT (293359.9 1465952)\n5        Kroch Chhmar POINT (567301.9 1359213)\n6               Memut   POINT (628526 1308056)\n\n\nNational Hospitals:\n\npoints_nationalhospital &lt;- st_read(dsn = \"data/cambodia/nationalhospital\", \n                layer = \"national_hospital_en\")\n\nReading layer `national_hospital_en' from data source \n  `C:\\viddyasri\\IS415-HealthGeo-India\\Prototype\\Take-home_Ex03\\data\\cambodia\\nationalhospital' \n  using driver `ESRI Shapefile'\nSimple feature collection with 9 features and 14 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 376678.3 ymin: 1276217 xmax: 491651.7 ymax: 1478968\nProjected CRS: WGS 84 / UTM zone 48N\n\n\n\nhead(points_nationalhospital)\n\nSimple feature collection with 6 features and 14 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 488043.7 ymin: 1276217 xmax: 491651.7 ymax: 1280229\nProjected CRS: WGS 84 / UTM zone 48N\n  pcode      pname      dname               cname     vname  building\n1    12 Phnom Penh  Daun Penh           Sras Chok Not found        #3\n2    12 Phnom Penh  Daun Penh Phsar Thmey Ti Muoy Not found      #118\n3    12 Phnom Penh  Toul Kork    Tuek L'ak Ti Pir Not found      #188\n4    12 Phnom Penh Chamkarmon         Tumnob Tuek Not found Not found\n5    12 Phnom Penh  Toul Kork    Tuek L'ak Ti Pir Not found      #100\n6    12 Phnom Penh  Daun Penh           Srah Chak Not found Not found\n                                      street\n1                              Monivong Blvd\n2 Preah Norodom Blvd, corner St. Kromoun Sar\n3       Yothapol Khemarak Phoumin Blvd (271)\n4       Yothapol Khemarak Phoumin Blvd (271)\n5                 Confederation de la Russie\n6   Chivapol (St.90), corner France St. (47)\n                                    web facilitcod\n1          https://www.calmette.gov.kh/        NH1\n2                             Not found        NH2\n3                             Not found        NH3\n4 http://www.khmersoviethospital.org.kh        NH4\n5                             Not found        NH5\n6          https://www.beat-richner.ch/        NH6\n                                       facilitnam\n1                               Calmette Hospital\n2                        Preah Ang Duong Hospital\n3 Cambodia - China Friend Preah Kossamak Hospital\n4                Khmer–Soviet Friendship Hospital\n5                     National Pediatric Hospital\n6             Kantha Bopha IV Children's Hospital\n                       reference      Lat     Long language\n1 screenshot_moh__17.03.2020.pdf 11.58105 104.9159  English\n2 screenshot_moh__17.03.2020.pdf 11.57166 104.9234  English\n3 screenshot_moh__17.03.2020.pdf 11.56397 104.8903  English\n4 screenshot_moh__17.03.2020.pdf 11.54476 104.9041  English\n5 screenshot_moh__17.03.2020.pdf 11.56849 104.8974  English\n6 screenshot_moh__17.03.2020.pdf 11.57753 104.9213  English\n                  geometry\n1 POINT (490831.1 1280229)\n2 POINT (491651.7 1279190)\n3 POINT (488043.7 1278341)\n4 POINT (489539.9 1276217)\n5   POINT (488818 1278841)\n6 POINT (491419.7 1279840)"
  },
  {
    "objectID": "Prototype/Take-home_Ex03/Take-home_Ex03.html#data-preparation",
    "href": "Prototype/Take-home_Ex03/Take-home_Ex03.html#data-preparation",
    "title": "Network Spatial Point Pattern Analysis",
    "section": "Data Preparation",
    "text": "Data Preparation\nPreparing Province Data:\nFor province data, since the province names have unique characters, we first modify them by converting characters in the NAME_1 column to ASCII equivalents using the stringi::stri_trans_general() function and putting the new, standardized names into a column called PROVINCE.\n\nprovince_sf &lt;- province_sf %&gt;%\n  mutate(PROVINCE = stringi::stri_trans_general(NAME_1, \"Latin-ASCII\"))\n\nPreparing Health Facilities Data:\nAs the facilities are initially not categorised, we make a new category column and label them accordingly.\n\npoints_healthcenter &lt;- points_healthcenter %&gt;% mutate(CATEGORY = \"Health Center\")\npoints_healthpost &lt;- points_healthpost %&gt;% mutate(CATEGORY = \"Health Post\")\npoints_referralhospital &lt;- points_referralhospital %&gt;% mutate(CATEGORY = \"Referral Hospital\")\npoints_nationalhospital &lt;- points_nationalhospital %&gt;% mutate(CATEGORY = \"National Hospital\")\n\nNext, we remove any unwanted columns.\n\npoints_healthcenter &lt;- subset(points_healthcenter, select = -COVERNAME)\n\nSince the columns in the national hospital dataset differ from the others, we’re starting the standardization process here. First, we’ll convert all columns to uppercase. Then, we’ll remove unmatched columns, add missing ones, and rearrange them. Finally, we’ll merge all the data points.\n\nst_geometry(points_nationalhospital) &lt;- \"geometry\"\n\n# Get the names of all columns except the geometry column\ncolumn_names &lt;- names(points_nationalhospital)[!grepl(\"^geometry$\", names(points_nationalhospital))]\n\n# Convert column names to uppercase\ncolumn_names_upper &lt;- toupper(column_names)\n\n# Replace column names in the sf object\nnames(points_nationalhospital)[!grepl(\"^geometry$\", names(points_nationalhospital))] &lt;- column_names_upper\n\n\n# Drop columns \"BUILDING\", \"STREET\", \"WEB\", \"REFERENCE\", \"LAT\", \"LONG\", and \"LANGUAGE\"\npoints_nationalhospital &lt;- subset(points_nationalhospital, select = -c(BUILDING, STREET, WEB, REFERENCE, LAT, LONG, LANGUAGE))\n\npoints_nationalhospital$DCODE &lt;- NA\npoints_nationalhospital$CCODE &lt;- NA\npoints_nationalhospital$VCODE &lt;- NA\npoints_nationalhospital$ODCODE &lt;- NA\npoints_nationalhospital$ODNAME &lt;- NA\n\n# Rearrange the columns\npoints_nationalhospital &lt;- points_nationalhospital[, c(\"PCODE\", \"PNAME\", \"DCODE\", \"DNAME\", \"CCODE\", \"CNAME\", \"VCODE\", \"VNAME\", \"ODCODE\", \"ODNAME\", \"FACILITCOD\", \"FACILITNAM\", \"CATEGORY\", \"geometry\")]\n\n# Print the modified sf object\nprint(points_nationalhospital)\n\nSimple feature collection with 9 features and 13 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 376678.3 ymin: 1276217 xmax: 491651.7 ymax: 1478968\nProjected CRS: WGS 84 / UTM zone 48N\n  PCODE      PNAME DCODE      DNAME CCODE               CNAME VCODE\n1    12 Phnom Penh    NA  Daun Penh    NA           Sras Chok    NA\n2    12 Phnom Penh    NA  Daun Penh    NA Phsar Thmey Ti Muoy    NA\n3    12 Phnom Penh    NA  Toul Kork    NA    Tuek L'ak Ti Pir    NA\n4    12 Phnom Penh    NA Chamkarmon    NA         Tumnob Tuek    NA\n5    12 Phnom Penh    NA  Toul Kork    NA    Tuek L'ak Ti Pir    NA\n6    12 Phnom Penh    NA  Daun Penh    NA           Srah Chak    NA\n7    17  Siem Reap    NA  Siem Reap    NA           Kork Chak    NA\n8    12 Phnom Penh    NA Chamkarmon    NA   Boeng Keng Kang 2    NA\n9    12 Phnom Penh    NA  Daun Penh    NA           Wat Phnom    NA\n         VNAME ODCODE ODNAME FACILITCOD\n1    Not found     NA     NA        NH1\n2    Not found     NA     NA        NH2\n3    Not found     NA     NA        NH3\n4    Not found     NA     NA        NH4\n5    Not found     NA     NA        NH5\n6    Not found     NA     NA        NH6\n7 Trapeang Ses     NA     NA        NH7\n8    Not found     NA     NA        NH8\n9    Not found     NA     NA        NH9\n                                                    FACILITNAM\n1                                            Calmette Hospital\n2                                     Preah Ang Duong Hospital\n3              Cambodia - China Friend Preah Kossamak Hospital\n4                             Khmer–Soviet Friendship Hospital\n5                                  National Pediatric Hospital\n6                          Kantha Bopha IV Children's Hospital\n7                                      Jayavarman VII Hospital\n8 National Center for Tuberculosis and Leprosy Control (CENAT)\n9            National Maternal and Child Health Center (NMCHC)\n           CATEGORY                 geometry\n1 National Hospital POINT (490831.1 1280229)\n2 National Hospital POINT (491651.7 1279190)\n3 National Hospital POINT (488043.7 1278341)\n4 National Hospital POINT (489539.9 1276217)\n5 National Hospital   POINT (488818 1278841)\n6 National Hospital POINT (491419.7 1279840)\n7 National Hospital POINT (376678.3 1478968)\n8 National Hospital POINT (491266.3 1277206)\n9 National Hospital POINT (491327.1 1280024)\n\n\n\npoints_facilities &lt;- rbind(points_healthcenter, points_healthpost, points_referralhospital, points_nationalhospital)\n\n\npoints_facilities$PNAME &lt;- gsub(\"Banteay Mean Chey\", \"Banteay Meanchey\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Battambang\", \"Batdambang\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Battam Bang\", \"Batdambang\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Kampong Speu\", \"Kampong Spoe\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Kampong Spueu\", \"Kampong Spoe\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Kampong Thom\", \"Kampong Thum\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Koh Kong\", \"Kaoh Kong\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Kratie\", \"Kracheh\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Pailin\", \"Krong Pailin\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Sihanoukville\", \"Krong Preah Sihanouk\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Sihaknouk Vill\", \"Krong Preah Sihanouk\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Mondul Kiri\", \"Mondol Kiri\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Oddor Meanchey\", \"Otdar Mean Chey\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Oddar Mean chey\", \"Otdar Mean Chey\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Oddar Meanchey\", \"Otdar Mean Chey\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Pursat\", \"Pouthisat\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Ratanak Kiri\", \"Rotanokiri\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Siemreap\", \"Siemreab\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Siem Reap\", \"Siemreab\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Stung  Treng\", \"Stoeng Treng\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Stung Treng\", \"Stoeng Treng\", points_facilities$PNAME)\npoints_facilities$PNAME &lt;- gsub(\"Takeo\", \"Takev\", points_facilities$PNAME)\n\n\nst_geometry(points_facilities)\n\nGeometry set for 1130 features \nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 213103.9 ymin: 1155396 xmax: 764437 ymax: 1594142\nProjected CRS: WGS 84 / UTM zone 48N\nFirst 5 geometries:\n\n\n\nwrite_rds(points_facilities, \"data/rds/points_facilities.rds\")\n\nHandle Invalid Geometries:\n\nBoundary LayerRoad LayerHealth Facilities\n\n\n\nlength(which(st_is_valid(province_sf) == FALSE))\n\n[1] 0\n\n\n\n\n\nlength(which(st_is_valid(cam_road_sf) == FALSE))\n\n[1] 0\n\n\n\n\n\nlength(which(st_is_valid(points_facilities) == FALSE))\n\n[1] 0\n\n\n\n\n\nProjection System Transformation:\n\nBoundary LayerRoad Layer\n\n\n\nprovince_sf &lt;- st_transform(province_sf, 32648)\nst_crs(province_sf)\n\nCoordinate Reference System:\n  User input: EPSG:32648 \n  wkt:\nPROJCRS[\"WGS 84 / UTM zone 48N\",\n    BASEGEOGCRS[\"WGS 84\",\n        ENSEMBLE[\"World Geodetic System 1984 ensemble\",\n            MEMBER[\"World Geodetic System 1984 (Transit)\"],\n            MEMBER[\"World Geodetic System 1984 (G730)\"],\n            MEMBER[\"World Geodetic System 1984 (G873)\"],\n            MEMBER[\"World Geodetic System 1984 (G1150)\"],\n            MEMBER[\"World Geodetic System 1984 (G1674)\"],\n            MEMBER[\"World Geodetic System 1984 (G1762)\"],\n            MEMBER[\"World Geodetic System 1984 (G2139)\"],\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ENSEMBLEACCURACY[2.0]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4326]],\n    CONVERSION[\"UTM zone 48N\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",105,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Navigation and medium accuracy spatial referencing.\"],\n        AREA[\"Between 102°E and 108°E, northern hemisphere between equator and 84°N, onshore and offshore. Cambodia. China. Indonesia. Laos. Malaysia - West Malaysia. Mongolia. Russian Federation. Singapore. Thailand. Vietnam.\"],\n        BBOX[0,102,84,108]],\n    ID[\"EPSG\",32648]]\n\n\n\nst_geometry(province_sf)\n\nGeometry set for 25 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 211598 ymin: 1096586 xmax: 784872.1 ymax: 1625374\nProjected CRS: WGS 84 / UTM zone 48N\nFirst 5 geometries:\n\n\n\nwrite_rds(province_sf, \"data/rds/province_sf.rds\")\n\n\n\n\ncam_road_sf &lt;- st_transform(cam_road_sf, 32648)\nst_crs(cam_road_sf)\n\nCoordinate Reference System:\n  User input: EPSG:32648 \n  wkt:\nPROJCRS[\"WGS 84 / UTM zone 48N\",\n    BASEGEOGCRS[\"WGS 84\",\n        ENSEMBLE[\"World Geodetic System 1984 ensemble\",\n            MEMBER[\"World Geodetic System 1984 (Transit)\"],\n            MEMBER[\"World Geodetic System 1984 (G730)\"],\n            MEMBER[\"World Geodetic System 1984 (G873)\"],\n            MEMBER[\"World Geodetic System 1984 (G1150)\"],\n            MEMBER[\"World Geodetic System 1984 (G1674)\"],\n            MEMBER[\"World Geodetic System 1984 (G1762)\"],\n            MEMBER[\"World Geodetic System 1984 (G2139)\"],\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ENSEMBLEACCURACY[2.0]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4326]],\n    CONVERSION[\"UTM zone 48N\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",105,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Navigation and medium accuracy spatial referencing.\"],\n        AREA[\"Between 102°E and 108°E, northern hemisphere between equator and 84°N, onshore and offshore. Cambodia. China. Indonesia. Laos. Malaysia - West Malaysia. Mongolia. Russian Federation. Singapore. Thailand. Vietnam.\"],\n        BBOX[0,102,84,108]],\n    ID[\"EPSG\",32648]]\n\n\n\nst_geometry(cam_road_sf)\n\nGeometry set for 169682 features \nGeometry type: MULTILINESTRING\nDimension:     XY\nBounding box:  xmin: 212247.3 ymin: 1152259 xmax: 783030 ymax: 1625600\nProjected CRS: WGS 84 / UTM zone 48N\nFirst 5 geometries:\n\n\n\nwrite_rds(cam_road_sf, \"data/rds/cam_road_sf.rds\")"
  },
  {
    "objectID": "Prototype/Take-home_Ex03/Take-home_Ex03.html#network-constrained-kernel-density-estimation",
    "href": "Prototype/Take-home_Ex03/Take-home_Ex03.html#network-constrained-kernel-density-estimation",
    "title": "Network Spatial Point Pattern Analysis",
    "section": "Network Constrained Kernel Density Estimation",
    "text": "Network Constrained Kernel Density Estimation\nFor the Shiny application, all kernel types will be included and the user will be able to experiment with different fixed bandwidths. NetKDE can also be performed on the 25 provinces of Cambodia and can be narrowed down to facility type. However, for the sake of execution time, this exercise will demonstrate only 3 combinations of kernels and bandwidths for the simple method specifically for the province of Kampot.\nPreparing the Road Layer and Facility Point Data:\n\nprovince_sf &lt;- readr::read_rds(\"data/rds/province_sf.rds\")\npoints_facilities &lt;- readr::read_rds(\"data/rds/points_facilities.rds\")\ncam_road_sf &lt;- readr::read_rds(\"data/rds/cam_road_sf.rds\")\n\n\nprovince = province_sf %&gt;% filter(PROVINCE==\"Kampot\")\nprovince_road_sf = st_intersection(cam_road_sf, st_union(province))\n\n\nprovince_facilities = st_intersection(points_facilities, st_union(province))\n\nConverting to Simple Geometries:\n\nprovince_road_sf &lt;- st_cast(province_road_sf, \"LINESTRING\")\n\nBasic Plot:\n\ntmap_mode(\"plot\")\ntm_shape(province_road_sf) + \n  tm_lines(col = \"#2b2b2b\") + \n  tm_shape(province_facilities) + \n  tm_dots(col = \"#29ab87\", size = 0.2)\n\n\n\n\n\nPerforming NetKDE\nPrepare Lixel Objects and Line Centre Points:\n\nlixels &lt;- lixelize_lines(province_road_sf, \n                         750, \n                         mindist = 375)\n\nsamples &lt;- lines_center(lixels)\n\n\nQuartic Kernel\nBandwidth - 200:\n\ndensities_q200 &lt;- nkde(\n    province_road_sf,\n    events = province_facilities,\n    w = rep(1, nrow(province_facilities)),\n    samples = samples,\n    kernel_name = \"quartic\",\n    bw = 200,\n    div = \"bw\",\n    method = \"simple\",\n    digits = 1,\n    tol = 1,\n    grid_shape = c(1, 1),\n    max_depth = 8,\n    agg = 5,\n    sparse = TRUE,\n    verbose = FALSE\n  )\n\n\nsamples$density_q200 &lt;- densities_q200*nrow(province_facilities)*1000\nlixels$density_q200 &lt;- densities_q200*nrow(province_facilities)*1000\n\nVisualization:\n\nsamples2 &lt;- samples[order(samples$density_q200),]\n\ntmap_mode(\"plot\")\ntm_shape(province_road_sf) + \n  tm_lines(\"black\") + \n  tm_shape(samples2) + \n  tm_dots(\"density_q200\", style = \"kmeans\", palette = \"GnBu\", n = 7, size = 0.07) + \n  tm_layout(legend.outside = FALSE)\n\n\n\n\n\nprovince_facilities &lt;- province_facilities %&gt;%\n    mutate(COMBINED_ID = paste(\"Name:\", FACILITNAM, \"|| Category:\", CATEGORY))\n  \ntmap_mode('view')\ntm_basemap(server = \"Esri.WorldTopoMap\") +\ntm_basemap(server = \"Esri.WorldGrayCanvas\")+\ntm_basemap(server = \"OpenStreetMap\") +\ntm_shape(lixels) +\n  tm_lines(col=\"density_q200\", palette=\"PuRd\", lwd=5) +\ntm_shape(province_facilities) +\n  tm_dots(id = \"COMBINED_ID\")+\ntm_shape(province) + \n  tm_borders()\n\n\n\n\n\n\n\ntmap_mode(\"plot\")\n\n\n\nEpanechnikov Kernel\nBandwidth - 300:\n\ndensities_e300 &lt;- nkde(\n    province_road_sf,\n    events = province_facilities,\n    w = rep(1, nrow(province_facilities)),\n    samples = samples,\n    kernel_name = \"epanechnikov\",\n    bw = 250,\n    div = \"bw\",\n    method = \"simple\",\n    digits = 1,\n    tol = 1,\n    grid_shape = c(1, 1),\n    max_depth = 8,\n    agg = 5,\n    sparse = TRUE,\n    verbose = FALSE\n  )\n\n\nsamples$density_e300 &lt;- densities_e300*nrow(province_facilities)*1000\nlixels$density_e300 &lt;- densities_e300*nrow(province_facilities)*1000\n\nVisualization:\n\nsamples2 &lt;- samples[order(samples$density_e300),]\n\ntmap_mode(\"plot\")\ntm_shape(province_road_sf) + \n  tm_lines(\"black\") + \n  tm_shape(samples2) + \n  tm_dots(\"density_e300\", style = \"kmeans\", palette = \"GnBu\", n = 7, size = 0.07) + \n  tm_layout(legend.outside = FALSE)\n\n\n\n\n\nprovince_facilities &lt;- province_facilities %&gt;%\n    mutate(COMBINED_ID = paste(\"Name:\", FACILITNAM, \"|| Category:\", CATEGORY))\n  \ntmap_mode('view')\ntm_basemap(server = \"Esri.WorldTopoMap\") +\ntm_basemap(server = \"Esri.WorldGrayCanvas\")+\ntm_basemap(server = \"OpenStreetMap\") +\ntm_shape(lixels) +\n  tm_lines(col=\"density_e300\", palette=\"PuRd\", lwd=5) +\ntm_shape(province_facilities) +\n  tm_dots(id = \"COMBINED_ID\")+\ntm_shape(province) + \n  tm_borders()\n\n\n\n\n\n\n\ntmap_mode(\"plot\")\n\n\n\nUniform Kernel\nBandwidth - 500:\n\ndensities_u500 &lt;- nkde(\n    province_road_sf,\n    events = province_facilities,\n    w = rep(1, nrow(province_facilities)),\n    samples = samples,\n    kernel_name = \"uniform\",\n    bw = 500,\n    div = \"bw\",\n    method = \"simple\",\n    digits = 1,\n    tol = 1,\n    grid_shape = c(1, 1),\n    max_depth = 8,\n    agg = 5,\n    sparse = TRUE,\n    verbose = FALSE\n  )\n\n\nsamples$density_u500 &lt;- densities_u500*nrow(province_facilities)*1000\nlixels$density_u500 &lt;- densities_u500*nrow(province_facilities)*1000\n\nVisualization:\n\nsamples2 &lt;- samples[order(samples$density_u500),]\n\ntmap_mode(\"plot\")\ntm_shape(province_road_sf) + \n  tm_lines(\"black\") + \n  tm_shape(samples2) + \n  tm_dots(\"density_u500\", style = \"kmeans\", palette = \"GnBu\", n = 7, size = 0.07) + \n  tm_layout(legend.outside = FALSE)\n\n\n\n\n\nprovince_facilities &lt;- province_facilities %&gt;%\n    mutate(COMBINED_ID = paste(\"Name:\", FACILITNAM, \"|| Category:\", CATEGORY))\n  \ntmap_mode('view')\ntm_basemap(server = \"Esri.WorldTopoMap\") +\ntm_basemap(server = \"Esri.WorldGrayCanvas\")+\ntm_basemap(server = \"OpenStreetMap\") +\ntm_shape(lixels) +\n  tm_lines(col=\"density_u500\", palette=\"PuRd\", lwd=5) +\ntm_shape(province_facilities) +\n  tm_dots(id = \"COMBINED_ID\")+\ntm_shape(province) + \n  tm_borders()\n\n\n\n\n\n\n\ntmap_mode(\"plot\")"
  },
  {
    "objectID": "Prototype/Take-home_Ex03/Take-home_Ex03.html#network-constrained-k-function-analysis",
    "href": "Prototype/Take-home_Ex03/Take-home_Ex03.html#network-constrained-k-function-analysis",
    "title": "Network Spatial Point Pattern Analysis",
    "section": "Network Constrained K-Function Analysis",
    "text": "Network Constrained K-Function Analysis\n\nNSIM - 30NSIM - 50NSIM - 70NSIM - 99\n\n\n\nkfun_healthcare &lt;- kfunctions(province_road_sf, \n                             province_facilities,\n                             start = 0, \n                             end = 1000, \n                             step = 50, \n                             width = 50, \n                             nsim = 30, \n                             resolution = 50,\n                             verbose = FALSE, \n                             conf_int = 0.05)\n\n\nkfun_healthcare$plotk\n\n\n\n\n\n\n\nkfun_healthcare &lt;- kfunctions(province_road_sf, \n                             province_facilities,\n                             start = 0, \n                             end = 1000, \n                             step = 50, \n                             width = 50, \n                             nsim = 50, \n                             resolution = 50,\n                             verbose = FALSE, \n                             conf_int = 0.05)\n\n\nkfun_healthcare$plotk\n\n\n\n\n\n\n\nkfun_healthcare &lt;- kfunctions(province_road_sf, \n                             province_facilities,\n                             start = 0, \n                             end = 1000, \n                             step = 50, \n                             width = 50, \n                             nsim = 70, \n                             resolution = 50,\n                             verbose = FALSE, \n                             conf_int = 0.05)\n\n\nkfun_healthcare$plotk\n\n\n\n\n\n\n\nkfun_healthcare &lt;- kfunctions(province_road_sf, \n                             province_facilities,\n                             start = 0, \n                             end = 1000, \n                             step = 50, \n                             width = 50, \n                             nsim = 99, \n                             resolution = 50,\n                             verbose = FALSE, \n                             conf_int = 0.05)\n\n\nkfun_healthcare$plotk"
  },
  {
    "objectID": "Prototype/Take-home_Ex03/Take-home_Ex03.html#storyboarding",
    "href": "Prototype/Take-home_Ex03/Take-home_Ex03.html#storyboarding",
    "title": "Network Spatial Point Pattern Analysis",
    "section": "Storyboarding",
    "text": "Storyboarding\nFor the storyboarding, it is divided it into three main sections: basic plotting, network constrained kernel density estimation (netKDE), and k-function analysis.\nIn this basic plot section, users have the option to choose a province for analysis. Additionally, they can narrow down their selection to specific types of facilities if desired. The outcome of this section is a straightforward map displaying the locations of facilities on the province network.\n\nThe second section enables users to conduct netKDE analysis. Here, they can select a particular province, further refine their choice by specifying facility types, and choose the kernel method along with the desired bandwidth for netKDE analysis. The result of this section comprises a tmap displayed in view mode, superimposed on the Esri.WorldTopoMap, and two other maps.\n\nIn the third section, users can customize parameters for the k-function analysis. They have the flexibility to adjust parameters such as the starting point, ending point, and the number of simulations (nsim). Upon completion, this section generates a plot illustrating the k-function analysis."
  }
]